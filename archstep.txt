
# cfdisk /dev/sda
# mkswap /dev/sda1
mkfs.ext4 /dev/sda2
mount /dev/sda2 /mnt
swapon /dev/sda1
pacstrap /mnt base base-devel linux linux-firmware nano net-tools git php-fpm nginx networkmanager grub grub-bios os-prober openssh openvpn 
genfstab -U /mnt >> /mnt/etc/fstab
arch-chroot /mnt
timedatectl set-ntp true
timedatectl set-timezone America/Detroit
timedatectl set-local-rtc 1
sed -i '/#en_US.UTF-8 UTF-8/c en_US.UTF-8 UTF-8' /etc/locale.gen
sed -i '/#en_US ISO-8859-1/c en_US ISO-8859-1' /etc/locale.gen
locale-gen
cat > /etc/vconsole.conf  <<KEY
KEYMAP=us
KEY
cat > /etc/hostname <<HOS
archserver
HOS
grub-install /dev/sda
mkinitcpio -p linux
grub-mkconfig -o /boot/grub/grub.cfg
echo -e "serverpass\serverpass" | passwd root
# quietly add a user without password
adduser --quiet --disabled-password --shell /bin/bash --home /home/media --gecos "User" media
# set password
echo "media:serverpass" | chpasswd
systemctl enable NetworkManager
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si

#exit
#umount -R /mnt

